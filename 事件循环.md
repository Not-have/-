# 一、进程和线程

## 1、进程（process）

计算机已经运行的程序，是操作系统管理程序的一种方式；

我们可以认为，启动一个应用程序，就会默认启动一个进程（也可能是多个进程）

## 2、线程（thread）

操作系统能够运行运算调度的最小单位，通常情况下它被包含在进程中

每一个进程中，都会启动至少一个线程用来执行程序中的代码，这个线程被称之为主线程

注：进程时线程的容器。

# 二、浏览器中的 JavaScript 线程

1、浏览器是一个进程吗，它里面只有一个线程吗？

1）目前多数的浏览器其实都是多进程的，当我们打开一个 tab 页面时就会开启一个新的进程，这是为了防止一个页 面卡死而造成所有页面无法响应，整个浏览器需要强制退出；

2）每个进程中又有很多的线程，其中包括执行 JavaScript 代码的线程。

2、JavaScript 的代码执行是在一个单独的线程中执行的：

1）这就意味着 JavaScript 的代码，在同一个时刻只能做一件事；

2）如果这件事是非常耗时，就意味着当前的线程就会被阻塞，所以真正耗时的操作，实际上并不是由 JavaScript 线程在执行的，而是由浏览器其他线程执行的，浏览器的每个进程是多线程的，那么其他线程可以来完成这个耗时的操作（比如网络请求、定时器，我们只需要在特性的时候执行应该有的回调即可）。

# 三、微任务和宏任务

注：`队列是先进先出`，栈是先进后出。

![image-20240204220428872](https://not-have.github.io/file/images/image-20240204220428872.png)

事件循环对于两个队列的优先级：

1、main script 中的代码优先执行（编写的顶层 script 代码）；

2、在执行任何一个宏任务之前（不是队列，是一个宏任务），都会先查看微任务队列中是否有任务需要执行（也就是宏任务执行之前，必须保证微任务队列是空的，如果不为空，那么就优先执行微任务队列中的任务（回调））

